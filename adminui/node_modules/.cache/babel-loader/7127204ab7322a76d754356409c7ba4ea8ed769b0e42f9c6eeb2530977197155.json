{"ast":null,"code":"import * as React from 'react';\nimport { useLatestRef } from '@base-ui-components/utils/useLatestRef';\nimport { useEventCallback } from '@base-ui-components/utils/useEventCallback';\nimport { useIsoLayoutEffect } from '@base-ui-components/utils/useIsoLayoutEffect';\nimport { useTimeout } from '@base-ui-components/utils/useTimeout';\nimport { stopEvent } from \"../utils.js\";\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\nexport function useTypeahead(context, props) {\n  const {\n    open,\n    dataRef\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onMatch: onMatchProp,\n    onTypingChange: onTypingChangeProp,\n    enabled = true,\n    findMatch = null,\n    resetMs = 750,\n    ignoreKeys = [],\n    selectedIndex = null\n  } = props;\n  const timeout = useTimeout();\n  const stringRef = React.useRef('');\n  const prevIndexRef = React.useRef(selectedIndex ?? activeIndex ?? -1);\n  const matchIndexRef = React.useRef(null);\n  const onMatch = useEventCallback(onMatchProp);\n  const onTypingChange = useEventCallback(onTypingChangeProp);\n  const findMatchRef = useLatestRef(findMatch);\n  const ignoreKeysRef = useLatestRef(ignoreKeys);\n  useIsoLayoutEffect(() => {\n    if (open) {\n      timeout.clear();\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open, timeout]);\n  useIsoLayoutEffect(() => {\n    // Sync arrow key navigation but not typeahead navigation.\n    if (open && stringRef.current === '') {\n      prevIndexRef.current = selectedIndex ?? activeIndex ?? -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n  const setTypingChange = useEventCallback(value => {\n    if (value) {\n      if (!dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    } else if (dataRef.current.typing) {\n      dataRef.current.typing = value;\n      onTypingChange(value);\n    }\n  });\n  const onKeyDown = useEventCallback(event => {\n    function getMatchingIndex(list, orderedList, string) {\n      const str = findMatchRef.current ? findMatchRef.current(orderedList, string) : orderedList.find(text => text?.toLocaleLowerCase().indexOf(string.toLocaleLowerCase()) === 0);\n      return str ? list.indexOf(str) : -1;\n    }\n    const listContent = listRef.current;\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      if (getMatchingIndex(listContent, listContent, stringRef.current) === -1) {\n        setTypingChange(false);\n      } else if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n    if (listContent == null || ignoreKeysRef.current.includes(event.key) ||\n    // Character key.\n    event.key.length !== 1 ||\n    // Modifier key.\n    event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    if (open && event.key !== ' ') {\n      stopEvent(event);\n      setTypingChange(true);\n    }\n\n    // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n    const allowRapidSuccessionOfFirstLetter = listContent.every(text => text ? text[0]?.toLocaleLowerCase() !== text[1]?.toLocaleLowerCase() : true);\n\n    // Allows the user to cycle through items that start with the same letter\n    // in rapid succession.\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n    stringRef.current += event.key;\n    timeout.start(resetMs, () => {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      setTypingChange(false);\n    });\n    const prevIndex = prevIndexRef.current;\n    const index = getMatchingIndex(listContent, [...listContent.slice((prevIndex || 0) + 1), ...listContent.slice(0, (prevIndex || 0) + 1)], stringRef.current);\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    } else if (event.key !== ' ') {\n      stringRef.current = '';\n      setTypingChange(false);\n    }\n  });\n  const reference = React.useMemo(() => ({\n    onKeyDown\n  }), [onKeyDown]);\n  const floating = React.useMemo(() => {\n    return {\n      onKeyDown,\n      onKeyUp(event) {\n        if (event.key === ' ') {\n          setTypingChange(false);\n        }\n      }\n    };\n  }, [onKeyDown, setTypingChange]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}","map":{"version":3,"names":["React","useLatestRef","useEventCallback","useIsoLayoutEffect","useTimeout","stopEvent","useTypeahead","context","props","open","dataRef","listRef","activeIndex","onMatch","onMatchProp","onTypingChange","onTypingChangeProp","enabled","findMatch","resetMs","ignoreKeys","selectedIndex","timeout","stringRef","useRef","prevIndexRef","matchIndexRef","findMatchRef","ignoreKeysRef","clear","current","setTypingChange","value","typing","onKeyDown","event","getMatchingIndex","list","orderedList","string","str","find","text","toLocaleLowerCase","indexOf","listContent","length","key","includes","ctrlKey","metaKey","altKey","allowRapidSuccessionOfFirstLetter","every","start","prevIndex","index","slice","reference","useMemo","floating","onKeyUp"],"sources":["C:/Users/james/Documents/DermaScan/adminui/node_modules/@base-ui-components/react/esm/floating-ui-react/hooks/useTypeahead.js"],"sourcesContent":["import * as React from 'react';\nimport { useLatestRef } from '@base-ui-components/utils/useLatestRef';\nimport { useEventCallback } from '@base-ui-components/utils/useEventCallback';\nimport { useIsoLayoutEffect } from '@base-ui-components/utils/useIsoLayoutEffect';\nimport { useTimeout } from '@base-ui-components/utils/useTimeout';\nimport { stopEvent } from \"../utils.js\";\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\nexport function useTypeahead(context, props) {\n  const {\n    open,\n    dataRef\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onMatch: onMatchProp,\n    onTypingChange: onTypingChangeProp,\n    enabled = true,\n    findMatch = null,\n    resetMs = 750,\n    ignoreKeys = [],\n    selectedIndex = null\n  } = props;\n  const timeout = useTimeout();\n  const stringRef = React.useRef('');\n  const prevIndexRef = React.useRef(selectedIndex ?? activeIndex ?? -1);\n  const matchIndexRef = React.useRef(null);\n  const onMatch = useEventCallback(onMatchProp);\n  const onTypingChange = useEventCallback(onTypingChangeProp);\n  const findMatchRef = useLatestRef(findMatch);\n  const ignoreKeysRef = useLatestRef(ignoreKeys);\n  useIsoLayoutEffect(() => {\n    if (open) {\n      timeout.clear();\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open, timeout]);\n  useIsoLayoutEffect(() => {\n    // Sync arrow key navigation but not typeahead navigation.\n    if (open && stringRef.current === '') {\n      prevIndexRef.current = selectedIndex ?? activeIndex ?? -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n  const setTypingChange = useEventCallback(value => {\n    if (value) {\n      if (!dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    } else if (dataRef.current.typing) {\n      dataRef.current.typing = value;\n      onTypingChange(value);\n    }\n  });\n  const onKeyDown = useEventCallback(event => {\n    function getMatchingIndex(list, orderedList, string) {\n      const str = findMatchRef.current ? findMatchRef.current(orderedList, string) : orderedList.find(text => text?.toLocaleLowerCase().indexOf(string.toLocaleLowerCase()) === 0);\n      return str ? list.indexOf(str) : -1;\n    }\n    const listContent = listRef.current;\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      if (getMatchingIndex(listContent, listContent, stringRef.current) === -1) {\n        setTypingChange(false);\n      } else if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n    if (listContent == null || ignoreKeysRef.current.includes(event.key) ||\n    // Character key.\n    event.key.length !== 1 ||\n    // Modifier key.\n    event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    if (open && event.key !== ' ') {\n      stopEvent(event);\n      setTypingChange(true);\n    }\n\n    // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n    const allowRapidSuccessionOfFirstLetter = listContent.every(text => text ? text[0]?.toLocaleLowerCase() !== text[1]?.toLocaleLowerCase() : true);\n\n    // Allows the user to cycle through items that start with the same letter\n    // in rapid succession.\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n    stringRef.current += event.key;\n    timeout.start(resetMs, () => {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      setTypingChange(false);\n    });\n    const prevIndex = prevIndexRef.current;\n    const index = getMatchingIndex(listContent, [...listContent.slice((prevIndex || 0) + 1), ...listContent.slice(0, (prevIndex || 0) + 1)], stringRef.current);\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    } else if (event.key !== ' ') {\n      stringRef.current = '';\n      setTypingChange(false);\n    }\n  });\n  const reference = React.useMemo(() => ({\n    onKeyDown\n  }), [onKeyDown]);\n  const floating = React.useMemo(() => {\n    return {\n      onKeyDown,\n      onKeyUp(event) {\n        if (event.key === ' ') {\n          setTypingChange(false);\n        }\n      }\n    };\n  }, [onKeyDown, setTypingChange]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}