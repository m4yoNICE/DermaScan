{"ast":null,"code":"// Modified to add conditional `aria-hidden` support:\n// https://github.com/theKashey/aria-hidden/blob/9220c8f4a4fd35f63bee5510a9f41a37264382d4/src/index.ts\nimport { getNodeName } from '@floating-ui/utils/dom';\nimport { getDocument } from \"./element.js\";\nconst counters = {\n  inert: new WeakMap(),\n  'aria-hidden': new WeakMap(),\n  none: new WeakMap()\n};\nfunction getCounterMap(control) {\n  if (control === 'inert') {\n    return counters.inert;\n  }\n  if (control === 'aria-hidden') {\n    return counters['aria-hidden'];\n  }\n  return counters.none;\n}\nlet uncontrolledElementsSet = new WeakSet();\nlet markerMap = {};\nlet lockCount = 0;\nexport const supportsInert = () => typeof HTMLElement !== 'undefined' && 'inert' in HTMLElement.prototype;\nconst unwrapHost = node => node && (node.host || unwrapHost(node.parentNode));\nconst correctElements = (parent, targets) => targets.map(target => {\n  if (parent.contains(target)) {\n    return target;\n  }\n  const correctedTarget = unwrapHost(target);\n  if (parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  return null;\n}).filter(x => x != null);\nfunction applyAttributeToOthers(uncorrectedAvoidElements, body, ariaHidden, inert) {\n  const markerName = 'data-base-ui-inert';\n  // eslint-disable-next-line no-nested-ternary\n  const controlAttribute = inert ? 'inert' : ariaHidden ? 'aria-hidden' : null;\n  const avoidElements = correctElements(body, uncorrectedAvoidElements);\n  const elementsToKeep = new Set();\n  const elementsToStop = new Set(avoidElements);\n  const hiddenElements = [];\n  if (!markerMap[markerName]) {\n    markerMap[markerName] = new WeakMap();\n  }\n  const markerCounter = markerMap[markerName];\n  avoidElements.forEach(keep);\n  deep(body);\n  elementsToKeep.clear();\n  function keep(el) {\n    if (!el || elementsToKeep.has(el)) {\n      return;\n    }\n    elementsToKeep.add(el);\n    if (el.parentNode) {\n      keep(el.parentNode);\n    }\n  }\n  function deep(parent) {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    [].forEach.call(parent.children, node => {\n      if (getNodeName(node) === 'script') {\n        return;\n      }\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        const attr = controlAttribute ? node.getAttribute(controlAttribute) : null;\n        const alreadyHidden = attr !== null && attr !== 'false';\n        const counterMap = getCounterMap(controlAttribute);\n        const counterValue = (counterMap.get(node) || 0) + 1;\n        const markerValue = (markerCounter.get(node) || 0) + 1;\n        counterMap.set(node, counterValue);\n        markerCounter.set(node, markerValue);\n        hiddenElements.push(node);\n        if (counterValue === 1 && alreadyHidden) {\n          uncontrolledElementsSet.add(node);\n        }\n        if (markerValue === 1) {\n          node.setAttribute(markerName, '');\n        }\n        if (!alreadyHidden && controlAttribute) {\n          node.setAttribute(controlAttribute, controlAttribute === 'inert' ? '' : 'true');\n        }\n      }\n    });\n  }\n  lockCount += 1;\n  return () => {\n    hiddenElements.forEach(element => {\n      const counterMap = getCounterMap(controlAttribute);\n      const currentCounterValue = counterMap.get(element) || 0;\n      const counterValue = currentCounterValue - 1;\n      const markerValue = (markerCounter.get(element) || 0) - 1;\n      counterMap.set(element, counterValue);\n      markerCounter.set(element, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledElementsSet.has(element) && controlAttribute) {\n          element.removeAttribute(controlAttribute);\n        }\n        uncontrolledElementsSet.delete(element);\n      }\n      if (!markerValue) {\n        element.removeAttribute(markerName);\n      }\n    });\n    lockCount -= 1;\n    if (!lockCount) {\n      counters.inert = new WeakMap();\n      counters['aria-hidden'] = new WeakMap();\n      counters.none = new WeakMap();\n      uncontrolledElementsSet = new WeakSet();\n      markerMap = {};\n    }\n  };\n}\nexport function markOthers(avoidElements, ariaHidden = false, inert = false) {\n  const body = getDocument(avoidElements[0]).body;\n  return applyAttributeToOthers(avoidElements.concat(Array.from(body.querySelectorAll('[aria-live]'))), body, ariaHidden, inert);\n}","map":{"version":3,"names":["getNodeName","getDocument","counters","inert","WeakMap","none","getCounterMap","control","uncontrolledElementsSet","WeakSet","markerMap","lockCount","supportsInert","HTMLElement","prototype","unwrapHost","node","host","parentNode","correctElements","parent","targets","map","target","contains","correctedTarget","filter","x","applyAttributeToOthers","uncorrectedAvoidElements","body","ariaHidden","markerName","controlAttribute","avoidElements","elementsToKeep","Set","elementsToStop","hiddenElements","markerCounter","forEach","keep","deep","clear","el","has","add","call","children","attr","getAttribute","alreadyHidden","counterMap","counterValue","get","markerValue","set","push","setAttribute","element","currentCounterValue","removeAttribute","delete","markOthers","concat","Array","from","querySelectorAll"],"sources":["C:/Users/james/Documents/DermaScan/adminui/node_modules/@base-ui-components/react/esm/floating-ui-react/utils/markOthers.js"],"sourcesContent":["// Modified to add conditional `aria-hidden` support:\n// https://github.com/theKashey/aria-hidden/blob/9220c8f4a4fd35f63bee5510a9f41a37264382d4/src/index.ts\nimport { getNodeName } from '@floating-ui/utils/dom';\nimport { getDocument } from \"./element.js\";\nconst counters = {\n  inert: new WeakMap(),\n  'aria-hidden': new WeakMap(),\n  none: new WeakMap()\n};\nfunction getCounterMap(control) {\n  if (control === 'inert') {\n    return counters.inert;\n  }\n  if (control === 'aria-hidden') {\n    return counters['aria-hidden'];\n  }\n  return counters.none;\n}\nlet uncontrolledElementsSet = new WeakSet();\nlet markerMap = {};\nlet lockCount = 0;\nexport const supportsInert = () => typeof HTMLElement !== 'undefined' && 'inert' in HTMLElement.prototype;\nconst unwrapHost = node => node && (node.host || unwrapHost(node.parentNode));\nconst correctElements = (parent, targets) => targets.map(target => {\n  if (parent.contains(target)) {\n    return target;\n  }\n  const correctedTarget = unwrapHost(target);\n  if (parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  return null;\n}).filter(x => x != null);\nfunction applyAttributeToOthers(uncorrectedAvoidElements, body, ariaHidden, inert) {\n  const markerName = 'data-base-ui-inert';\n  // eslint-disable-next-line no-nested-ternary\n  const controlAttribute = inert ? 'inert' : ariaHidden ? 'aria-hidden' : null;\n  const avoidElements = correctElements(body, uncorrectedAvoidElements);\n  const elementsToKeep = new Set();\n  const elementsToStop = new Set(avoidElements);\n  const hiddenElements = [];\n  if (!markerMap[markerName]) {\n    markerMap[markerName] = new WeakMap();\n  }\n  const markerCounter = markerMap[markerName];\n  avoidElements.forEach(keep);\n  deep(body);\n  elementsToKeep.clear();\n  function keep(el) {\n    if (!el || elementsToKeep.has(el)) {\n      return;\n    }\n    elementsToKeep.add(el);\n    if (el.parentNode) {\n      keep(el.parentNode);\n    }\n  }\n  function deep(parent) {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    [].forEach.call(parent.children, node => {\n      if (getNodeName(node) === 'script') {\n        return;\n      }\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        const attr = controlAttribute ? node.getAttribute(controlAttribute) : null;\n        const alreadyHidden = attr !== null && attr !== 'false';\n        const counterMap = getCounterMap(controlAttribute);\n        const counterValue = (counterMap.get(node) || 0) + 1;\n        const markerValue = (markerCounter.get(node) || 0) + 1;\n        counterMap.set(node, counterValue);\n        markerCounter.set(node, markerValue);\n        hiddenElements.push(node);\n        if (counterValue === 1 && alreadyHidden) {\n          uncontrolledElementsSet.add(node);\n        }\n        if (markerValue === 1) {\n          node.setAttribute(markerName, '');\n        }\n        if (!alreadyHidden && controlAttribute) {\n          node.setAttribute(controlAttribute, controlAttribute === 'inert' ? '' : 'true');\n        }\n      }\n    });\n  }\n  lockCount += 1;\n  return () => {\n    hiddenElements.forEach(element => {\n      const counterMap = getCounterMap(controlAttribute);\n      const currentCounterValue = counterMap.get(element) || 0;\n      const counterValue = currentCounterValue - 1;\n      const markerValue = (markerCounter.get(element) || 0) - 1;\n      counterMap.set(element, counterValue);\n      markerCounter.set(element, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledElementsSet.has(element) && controlAttribute) {\n          element.removeAttribute(controlAttribute);\n        }\n        uncontrolledElementsSet.delete(element);\n      }\n      if (!markerValue) {\n        element.removeAttribute(markerName);\n      }\n    });\n    lockCount -= 1;\n    if (!lockCount) {\n      counters.inert = new WeakMap();\n      counters['aria-hidden'] = new WeakMap();\n      counters.none = new WeakMap();\n      uncontrolledElementsSet = new WeakSet();\n      markerMap = {};\n    }\n  };\n}\nexport function markOthers(avoidElements, ariaHidden = false, inert = false) {\n  const body = getDocument(avoidElements[0]).body;\n  return applyAttributeToOthers(avoidElements.concat(Array.from(body.querySelectorAll('[aria-live]'))), body, ariaHidden, inert);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}